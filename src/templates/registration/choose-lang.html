<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JSFiddle nxp7t32m</title>

  <style>
      
  
  body{
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
    header{
  /* Rectangle 1 */

  width: 100%;
  height: 60px;
  left: 6px;
  top: 4px;

  background: #D9D9D9;
  border-radius: 10px;

  display: grid;

  grid-template-columns: 50% 50%;
}

._right_side {
  height: 100%; 
  display: grid;
  grid-template-columns: 60% 40%;
}


.-L-right{
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  gap: 10px;
  padding-right: 10px;
}


.-usrnm{
  display: flex;

  height: 70%;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  gap: 10px;
}

.User_name {
  top: 10px;
  font-family: 'Courier New', Courier, monospace;
  color: #535353;
    
  width: 134px;
  height: 20px;


  background: #FFFDFD;
  border-radius: 10px;

  text-align: center;
  line-height: 20px;


}




.avatar{
  /* Ellipse 1 */
  width: 54px;
  height: 54px;

  border-radius: 30px;
  background: #FFFFFF;

}

section, .lang-select-holder, .lang-select{
    display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
  gap: 10px;
}


section{
  /* Frame 1 */

width: 100%;
height: 80vh;
left: 7px;
top: 36px;


}

.lang-select-holder{
  /* Frame 29 */

width: 700px;
height: 600px;
left: 142px;
top: 7px;

background: #B3B3B3;
border-radius: 20px;

}

.lang-select{
  /* Frame 29 */

width: 650px;
height: 550px;


background: #fffbfb;
border-radius: 20px;

font-family: 'Courier New', Courier, monospace;
font-size: 8px;
}

.content___{
  width: 80%;
   flex-direction: column;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
  gap: 10px;
}

.lang-list-selection {
  /* Frame 31 */
  box-sizing: border-box;
  width: 100%;
  height: 140px;
  background: rgba(192, 192, 192, 0.4);
  border: 1px solid rgba(0, 0, 0, 0.42);
  border-radius: 7px;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  gap: 10px;
  overflow-y: auto;
  
  /* Фикс для прокрутки */
  padding: 10px;
  min-height: 140px; /* Добавляем min-height */
  
  /* Стилизация скроллбара */
  scrollbar-width: thin;
  scrollbar-color: #888 #f1f1f1;
}

/* Для Chrome, Safari, Edge */
.lang-list-selection::-webkit-scrollbar {
  width: 8px;
}

.lang-list-selection::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.lang-list-selection::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

.lang-list-selection::-webkit-scrollbar-thumb:hover {
  background: #555;
}
.btn-select-holder{
  width: 100%;
  height: 70px;
  display: flex;
    flex-direction: row;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
  gap: 100px;

}


button{
  width: 272px ;
  height: 50px ;
  
  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
  border: none;
  transition: all 0.1s;
  display: flex;
  align-items: center;
  justify-content: center;
  color: rgb(253, 253, 253);
      font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 20px;
}

.skip{
  background-color: #474747;
}

.continue{
  background-color: #09DA09;

}
.continue{
    background-color: #3ec53e;
}
.skip:hover {
    background-color: #686868;

}
button:active {
    transform: translateY(4px);
    box-shadow: none;
}

.language {
  width: 95%;
  height: 55px;
  background: #FFFFFF;
  border-radius: 10px;
  flex-shrink: 0; /* Не даем сжиматься элементам */
  display: grid;
  grid-template-columns: 40% 60%;
}


.IMG-NAME_, .CHECKBOX_{
  height: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
  gap: 10px;
  font-size: 15px;
}
.IMG-NAME_{justify-content: flex-start;
  padding-left: 10px;
}
.CHECKBOX_{justify-content: flex-end;
padding-right: 10px;
}



img{
  width: 80px;
  height: 40px;
  border-radius: 10px;
}

.checkbox_ {
  box-sizing: border-box;
  width: 23px;
  height: 23px;
  background: #B5B5B5;
  border: 1px solid #77FF00;
  border-radius: 5px;
  cursor: pointer;
  /* Для стандартного чекбокса */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  position: relative;
}

.checkbox_:checked {
  background: #77FF00;
}

.checkbox_:checked::after {
  content: "✓";
  position: absolute;
  color: white;
  font-size: 16px;
  font-weight: bold;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}


  </style>

  
</head>
<body>
  <header>

  <div class="_left_side"></div>
  <div class="_right_side">
    <div class="-L-left"></div>
    <div class="-L-right">
      <div class="-usrnm">
        <div class="User_name">{{user.username}}</div>
        
      </div>
      <div class="avatar"></div>
    </div>
  </div>

</header>
<section>
  <div class="lang-select-holder">
    <div class="lang-select">
      <!-- БЕЗ формы, только кнопка -->
      <div class="content___">
        <h1>Выберите языки которые хотите изучать.</h1>
        <div class="lang-list-selection">
          {% if languages_list %}
            {% for language in languages_list %}
            <div class="language">
              <div class="IMG-NAME_">
                <img src="{{ language.ico }}"/>
                <h3>{{ language.language_name }}</h3>
              </div>
              <div class="CHECKBOX_">
                <input class="checkbox_" type="checkbox" value="{{ language.id }}" />
              </div>
            </div>
            {% endfor %}
          {% else %}
            <h1>На данный момент у вас уже все языки. Нажмите продолжить чтоб вернутья на главную</h1>
          {% endif %}
        </div>
        <div class="btn-select-holder">
          <button class="continue" id="sendBtn">Продолжить</button>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
document.getElementById('sendBtn').addEventListener('click', function() {
  // Собираем все выбранные чекбоксы
  const checkboxes = document.querySelectorAll('.checkbox_:checked');
  
  // Формируем массив
  const data = [];
  const user = {{ user.id }};
  checkboxes.forEach(cb => {
    data.push({ language_id: parseInt(cb.value) });
  });
  
  // Отправляем
  fetch('', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRFToken': '{{ csrf_token }}'
    },
    body: JSON.stringify(data, user)
  }).then (response => {
    if (response.ok) {
      // Успешно
      window.location.href = '/home';  // Перенаправление на домашнюю страницу
    } else {
      // Ошибка
      alert('Ошибка при отправке данных');
    }
  }).catch(error => {
    console.error('Ошибка:', error);
  });
});
</script>
</body>
</html>
